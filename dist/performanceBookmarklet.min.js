/* https://github.com/dengzhizhi/performance-bookmarklet/tree/enhanced-resource-timeline by Zhizhi Deng
   build:01/10/2021 */

!function r(l,i,d){function s(t,e){if(!i[t]){if(!l[t]){var a="function"==typeof require&&require;if(!e&&a)return a(t,!0);if(c)return c(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var o=i[t]={exports:{}};l[t][0].call(o.exports,function(e){return s(l[t][1][e]||e)},o,o.exports,r,l,i,d)}return i[t].exports}for(var c="function"==typeof require&&require,e=0;e<d.length;e++)s(d[e]);return s}({1:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n,r=(n=e("../helpers/dom"))&&n.__esModule?n:{default:n};function o(e,t,a){var n=r.default.newTag("div",{class:"legend-holder"});n.appendChild(r.default.newTag("h4",{text:t}));var o=r.default.newTag("dl",{class:"legend "+e});return a.forEach(function(e){o.appendChild(r.default.newTag("dt",{class:"colorBoxHolder",childElement:r.default.newTag("span",{},"background:"+e[1])})),o.appendChild(r.default.newTag("dd",{text:e[0]}))}),n.appendChild(o),n}var l={};l.init=function(){var e=r.default.newTag("section",{class:"resource-timing chart-holder"});e.appendChild(r.default.newTag("h3",{text:"Legend"}));var t=r.default.newTag("div",{class:"legends-group "});return t.appendChild(o("initiator-type-legend","Block color: Initiator Type",[["css","#afd899"],["iframe","#85b3f2"],["img","#bc9dd6"],["script","#e7bd8c"],["link","#89afe6"],["swf","#4db3ba"],["xmlhttprequest","#e7d98c"]])),t.appendChild(o("navigation-legend","Navigation Timing",[["Redirect","#ffff60"],["App Cache","#1f831f"],["DNS Lookup","#1f7c83"],["TCP","#e58226"],["SSL Negotiation","#c141cd"],["Time to First Byte","#1fe11f"],["Content Download","#1977dd"],["DOM Processing","#9cc"],["DOM Content Loaded","#d888df"],["On Load","#c0c0ff"]])),t.appendChild(o("resource-legend","Resource Timing",[["Stalled/Blocking","#cdcdcd"],["Redirect","#ffff60"],["App Cache","#1f831f"],["DNS Lookup","#1f7c83"],["TCP","#e58226"],["SSL Negotiation","#c141cd"],["Initial Connection (TCP)","#e58226"],["Time to First Byte","#1fe11f"],["Content Download","#1977dd"]])),e.appendChild(t),e};var i=l;a.default=i},{"../helpers/dom":6}],2:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=r(e("../data")),o=(r(e("../helpers/tableLogger")),r(e("../helpers/waterfall")));function r(e){return e&&e.__esModule?e:{default:e}}var l={init:function(){var e=n.default.perfTiming.navigationStart,t={pageLoadTime:n.default.perfTiming.loadEventEnd-n.default.perfTiming.navigationStart,output:[]};for(var a in n.default.perfTiming)n.default.perfTiming[a]&&"number"==typeof n.default.perfTiming[a]&&(t[a]=n.default.perfTiming[a]-e,t.output.push({name:a,"time (ms)":n.default.perfTiming[a]-e}));return t.output.sort(function(e,t){return(e["time (ms)"]||0)-(t["time (ms)"]||0)}),t.blocks=[o.default.timeBlock("Total",0,t.pageLoadTime,"block-total"),o.default.timeBlock("Unload",t.unloadEventStart,t.unloadEventEnd,"block-unload"),o.default.timeBlock("Redirect ("+performance.navigation.redirectCount+"x)",t.redirectStart,t.redirectEnd,"block-redirect"),o.default.timeBlock("App cache",t.fetchStart,t.domainLookupStart,"block-appcache"),o.default.timeBlock("DNS",t.domainLookupStart,t.domainLookupEnd,"block-dns"),o.default.timeBlock("TCP",t.connectStart,t.connectEnd,"block-tcp"),o.default.timeBlock("Time to First Byte",t.requestStart,t.responseStart,"block-ttfb"),o.default.timeBlock("Response",t.responseStart,t.responseEnd,"block-response"),o.default.timeBlock("DOM Processing",t.domLoading,t.domComplete,"block-dom"),o.default.timeBlock("domContentLoaded Event",t.domContentLoadedEventStart,t.domContentLoadedEventEnd,"block-dom-content-loaded"),o.default.timeBlock("onload Event",t.loadEventStart,t.loadEventEnd,"block-onload")],t.secureConnectionStart&&t.blocks.push(o.default.timeBlock("SSL",t.secureConnectionStart,t.connectEnd,"block-ssl")),t.msFirstPaint&&t.blocks.push(o.default.timeBlock("msFirstPaint Event",t.msFirstPaint,t.msFirstPaint,"block-ms-first-paint-event")),t.domInteractive&&t.blocks.push(o.default.timeBlock("domInteractive Event",t.domInteractive,t.domInteractive,"block-dom-interactive-event")),!t.redirectEnd&&!t.redirectStart&&t.fetchStart>t.navigationStart&&t.blocks.push(o.default.timeBlock("Cross-Domain Redirect (and/or other Delay)",t.navigationStart,t.fetchStart,"block-redirect")),t.blocks.push(o.default.timeBlock("Network/Server",t.navigationStart,t.responseStart,"block-network-server")),n.default.measures.forEach(function(e){t.blocks.push(o.default.timeBlock("measure:"+e.name,Math.round(e.startTime),Math.round(e.startTime+e.duration),"block-custom-measure"))}),o.default.setupTimeLine(0,Math.round(t.pageLoadTime),t.blocks,n.default.marks,[],"Navigation Timing")}},i=l;a.default=i},{"../data":5,"../helpers/tableLogger":12,"../helpers/waterfall":13}],3:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(e("../helpers/dom")),l=n(e("../helpers/persistance"));function n(e){return e&&e.__esModule?e:{default:e}}var o={init:function(){var e=l.default.persistanceEnabled(),t=r.default.newTag("section",{class:"page-metric chart-holder"});t.appendChild(r.default.newTag("h3",{text:"Persist Data"}));var a=r.default.newTag("label",{text:" Persist Data?"}),n=r.default.newTag("input",{type:"checkbox",id:"persist-data-checkbox",checked:e}),o=r.default.newTag("button",{text:"Dumb data to console",disabled:!e});return n.addEventListener("change",function(e){e.target.checked?(l.default.activatePersistance(),o.disabled=!1):window.confirm("this will wipe out all stored data")?(l.default.deactivatePersistance(),o.disabled=!0):e.target.checked=!0}),a.insertBefore(n,a.firstChild),o.addEventListener("click",function(e){l.default.dump(!1)}),t.appendChild(a),t.appendChild(o),e&&l.default.saveLatestMetrics(),t}},i=o;a.default=i},{"../helpers/dom":6,"../helpers/persistance":9}],4:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var p=n(e("../data")),m=n(e("../helpers/dom")),h=n(e("../helpers/waterfall"));function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domain="all",this.startTime=0,this.endTime=null,this.markFrom=null,this.excludeDomainPattern="",this.includeDomainPattern=""}return function(e,t,a){t&&o(e.prototype,t),a&&o(e,a)}(e,[{key:"isPartial",value:function(){return!(0===this.startTime&&null===this.endTime)}},{key:"getChartData",value:function(e){var o={pageLoadTime:p.default.perfTiming.loadEventEnd-p.default.perfTiming.responseStart,lastResponseEnd:p.default.perfTiming.loadEventEnd-p.default.perfTiming.responseStart};for(var t in p.default.perfTiming)p.default.perfTiming[t]&&"number"==typeof p.default.perfTiming[t]&&(o[t]=p.default.perfTiming[t]-p.default.perfTiming.navigationStart);var a=h.default.timeBlock("domContentLoaded Event",o.domContentLoadedEventStart,o.domContentLoadedEventEnd,"block-dom-content-loaded"),n=h.default.timeBlock("Onload Event",o.loadEventStart,o.loadEventEnd,"block-onload"),r=[h.default.timeBlock("Unload",o.unloadEventStart,o.unloadEventEnd,"block-unload"),h.default.timeBlock("Redirect",o.redirectStart,o.redirectEnd,"block-redirect"),h.default.timeBlock("App cache",o.fetchStart,o.domainLookupStart,"block-appcache"),h.default.timeBlock("DNS",o.domainLookupStart,o.domainLookupEnd,"block-dns"),h.default.timeBlock("TCP",o.connectStart,o.connectEnd,"block-tcp"),h.default.timeBlock("Timer to First Byte",o.requestStart,o.responseStart,"block-ttfb"),h.default.timeBlock("Response",o.responseStart,o.responseEnd,"block-response"),h.default.timeBlock("DOM Processing",o.domLoading,o.domComplete,"block-dom"),a,n];return o.secureConnectionStart&&r.push(h.default.timeBlock("SSL",o.secureConnectionStart,o.connectEnd,"block-ssl")),o.msFirstPaint&&r.push(h.default.timeBlock("msFirstPaint Event",o.msFirstPaint,o.msFirstPaint,"block-ms-first-paint-event")),o.domInteractive&&r.push(h.default.timeBlock("domInteractive Event",o.domInteractive,o.domInteractive,"block-dom-interactive-event")),!o.redirectEnd&&!o.redirectStart&&o.fetchStart>o.navigationStart&&r.push(h.default.timeBlock("Cross-Domain Redirect",o.navigationStart,o.fetchStart,"block-redirect")),o.blocks=this.isPartial()?[]:[h.default.timeBlock("Navigation API total",0,o.loadEventEnd,"block-navigation-api-total",r)],p.default.allResourcesCalc.filter(function(e){return e.startTime<o.loadEventEnd+2e4}).filter(e||function(){return!0}).forEach(function(a,e){var t=[h.default.timeBlock("Redirect",a.redirectStart,a.redirectEnd,"block-redirect"),h.default.timeBlock("DNS Lookup",a.domainLookupStart,a.domainLookupEnd,"block-dns"),h.default.timeBlock("Initial Connection (TCP)",a.connectStart,a.connectEnd,"block-dns"),h.default.timeBlock("secureConnect",a.secureConnectionStart||void 0,a.connectEnd,"block-ssl"),h.default.timeBlock("Timer to First Byte",a.requestStart,a.responseStart,"block-ttfb"),h.default.timeBlock("Content Download",a.responseStart||void 0,a.responseEnd,"block-response")],n=[0,a.redirectStart,a.domainLookupStart,a.connectStart,a.secureConnectionStart,a.requestStart,a.responseStart].reduce(function(e,t){return 0<t&&(t<e||e<=0)&&t!=a.startTime?t:e});a.startTime<n&&t.unshift(h.default.timeBlock("Stalled/Blocking",a.startTime,n,"block-blocking")),o.blocks.push(h.default.timeBlock(a.name,a.startTime,a.responseEnd,"block-"+a.initiatorType,t,a)),o.lastResponseEnd=Math.max(o.lastResponseEnd,a.responseEnd)}),{loadDuration:this.isPartial()?Math.max((o.blocks.map(function(e){return e.end}).reduce(function(e,t){return Math.max(e,t)},1e3)||1e3*this.startTime)-1e3*this.startTime,1e3):Math.round(Math.max(o.lastResponseEnd,p.default.perfTiming.loadEventEnd-p.default.perfTiming.navigationStart)),blocks:o.blocks,bg:[a,n]}}},{key:"refreshSVG",value:function(e){var t=this,a=1e3*t.startTime,n=t.endTime?1e3*t.endTime:null,o=t.includeDomainPattern&&""!==t.includeDomainPattern.trim()?new RegExp(t.includeDomainPattern):null,r=t.excludeDomainPattern&&""!==t.excludeDomainPattern.trim()?new RegExp(t.excludeDomainPattern):null,l=t.getChartData(function(e){return("all"===t.domain||e.domain===t.domain)&&e.startTime>=a&&(!n||e.startTime<=n)&&(!o||o.exec(e.name))&&(!r||!r.exec(e.name))}),i=a+l.loadDuration,d=h.default.setupTimeLine(t.startTime,l.loadDuration,l.blocks,p.default.marks.filter(function(e){return e.startTime>=a&&e.startTime<=i&&(!t.markFrom||e.startTime>=1e3*t.markFrom)}),l.bg,"Temp"),s=e.getElementsByClassName("water-fall-chart")[0],c=d.getElementsByClassName("water-fall-chart")[0];e.replaceChild(c,s)}},{key:"init",value:function(){var a=this,e=a.getChartData(),n=h.default.setupTimeLine(a.startTime,e.loadDuration,e.blocks,p.default.marks,e.bg,"Resource Timing"),t=n.getElementsByClassName("water-fall-chart")[0],o=m.default.newTag("textarea",{class:"exclude-pattern-editor",placeholder:"Exclude pattern",onblur:function(e){e.target.value;a.excludeDomainPattern=e.target.value.trim()||"",a.refreshSVG(n)}});t.parentNode.insertBefore(o,t);var r=m.default.newTag("textarea",{class:"include-pattern-editor",placeholder:"Include pattern",onblur:function(e){e.target.value;a.includeDomainPattern=e.target.value.trim()||"",a.refreshSVG(n)}});t.parentNode.insertBefore(r,t);var l=m.default.newTag("select",{class:"mark-from-selector",onchange:function(e){var t=e.target.options[e.target.selectedIndex].value;a.markFrom="all"!==t?parseInt(t):null,a.refreshSVG(n)}});l.appendChild(m.default.newTag("option",{text:"Mark From",value:"all"}));for(var i=1;i<=25;i++)l.appendChild(m.default.newTag("option",{text:i}));t.parentNode.insertBefore(l,t);var d=m.default.newTag("select",{class:"end-time-selector",onchange:function(e){var t=e.target.options[e.target.selectedIndex].value;a.endTime="all"!==t?parseInt(t):null,a.refreshSVG(n)}});d.appendChild(m.default.newTag("option",{text:"To",value:"all"}));for(var s=1;s<=25;s++)d.appendChild(m.default.newTag("option",{text:s}));t.parentNode.insertBefore(d,t);var c=m.default.newTag("select",{class:"start-time-selector",onchange:function(e){var t=e.target.options[e.target.selectedIndex].value;a.startTime=t?parseInt(t):0,a.refreshSVG(n)}});c.appendChild(m.default.newTag("option",{text:"From",value:"0"}));for(var u=1;u<=20;u++)c.appendChild(m.default.newTag("option",{text:u}));if(t.parentNode.insertBefore(c,t),1<p.default.requestsByDomain.length){var f=m.default.newTag("select",{class:"domain-selector",onchange:function(e){a.domain=e.target.options[e.target.selectedIndex].value,a.refreshSVG(n)}});f.appendChild(m.default.newTag("option",{text:"show all",value:"all"})),p.default.requestsByDomain.forEach(function(e){f.appendChild(m.default.newTag("option",{text:e.domain}))}),t.parentNode.insertBefore(f,t)}return n}}]),e}();a.default=r},{"../data":5,"../helpers/dom":6,"../helpers/waterfall":13}],5:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n,d=(n=e("./helpers/helpers"))&&n.__esModule?n:{default:n};var o=!0,r={resources:[],marks:[],measures:[],perfTiming:[],allResourcesCalc:[],isValid:function(){return o}};!function(){o=function(){if(window.performance&&void 0!==window.performance.getEntriesByType)r.resources=window.performance.getEntriesByType("resource"),r.marks=window.performance.getEntriesByType("mark"),r.measures=window.performance.getEntriesByType("measure");else{if(!window.performance||void 0===window.performance.webkitGetEntriesByType)return alert("Oups, looks like this browser does not support the Resource Timing API\ncheck http://caniuse.com/#feat=resource-timing to see the ones supporting it \n\n"),!1;r.resources=window.performance.webkitGetEntriesByType("resource"),r.marks=window.performance.webkitGetEntriesByType("mark"),r.measures=window.performance.webkitGetEntriesByType("measure")}return window.performance.timing?(r.perfTiming=window.performance.timing,!(r.perfTiming.loadEventEnd-r.perfTiming.navigationStart<0)||(alert("Page is still loading - please try again when page is loaded."),!1)):(alert("Oups, looks like this browser does not support performance timing"),!1)}(),r.allResourcesCalc=r.resources.filter(function(e){return!e.name.match(/http[s]?\:\/\/(micmro|nurun).github.io\/performance-bookmarklet\/.*/)}).map(function(e,t,a){var n,o,r;r=0===e.name.indexOf("http")?(o=(n=e.name.match(/:\/\/(.[^/]+)([^?]*)\??(.*)/))[2].split("/").pop()).substr((Math.max(0,o.lastIndexOf("."))||1/0)+1):(n=["",location.host],e.name.split(":")[0]);var l={name:e.name,domain:n[1],initiatorType:e.initiatorType||r||"SourceMap or Not Defined",fileExtension:r||"XHR or Not Defined",loadtime:e.duration,fileType:d.default.getFileType(r,e.initiatorType),isRequestToHost:n[1]===location.host};for(var i in e)"function"!=typeof e[i]&&(l[i]=e[i]);return e.requestStart&&(l.requestStartDelay=e.requestStart-e.startTime,l.dns=e.domainLookupEnd-e.domainLookupStart,l.tcp=e.connectEnd-e.connectStart,l.ttfb=e.responseStart-e.startTime,l.requestDuration=e.responseStart-e.requestStart),e.secureConnectionStart&&(l.ssl=e.connectEnd-e.secureConnectionStart),l}),r.requestsOnly=r.allResourcesCalc.filter(function(e){return 0===e.name.indexOf("http")&&!e.name.match(/js.map$/)}),r.initiatorTypeCounts=d.default.getItemCount(r.requestsOnly.map(function(e,t,a){return e.initiatorType||e.fileExtension}),"initiatorType"),r.initiatorTypeCountHostExt=d.default.getItemCount(r.requestsOnly.map(function(e,t,a){return(e.initiatorType||e.fileExtension)+" "+(e.isRequestToHost?"(host)":"(external)")}),"initiatorType"),r.requestsByDomain=d.default.getItemCount(r.requestsOnly.map(function(e,t,a){return e.domain}),"domain"),r.fileTypeCountHostExt=d.default.getItemCount(r.requestsOnly.map(function(e,t,a){return e.fileType+" "+(e.isRequestToHost?"(host)":"(external)")}),"fileType"),r.fileTypeCounts=d.default.getItemCount(r.requestsOnly.map(function(e,t,a){return e.fileType}),"fileType");var n={};r.requestsOnly.forEach(function(t){var e=r.requestsByDomain.filter(function(e){return e.domain==t.domain})[0]||{},a=n[t.domain]||0;t.duration=e.duration||t.responseEnd-t.startTime,a<=t.startTime?e.durationTotalParallel=(e.durationTotalParallel||0)+t.duration:a<t.responseEnd&&(e.durationTotalParallel=(e.durationTotalParallel||0)+(t.responseEnd-a)),n[t.domain]=t.responseEnd||0,e.durationTotal=(e.durationTotal||0)+t.duration}),r.hostRequests=r.requestsOnly.filter(function(e){return e.domain===location.host}).length,r.currAndSubdomainRequests=r.requestsOnly.filter(function(e){return e.domain.split(".").slice(-2).join(".")===location.host.split(".").slice(-2).join(".")}).length,r.crossDocDomainRequests=r.requestsOnly.filter(function(e){return!d.default.endsWith(e.domain,document.domain)}).length,r.hostSubdomains=r.requestsByDomain.filter(function(e){return d.default.endsWith(e.domain,location.host.split(".").slice(-2).join("."))&&e.domain!==location.host}).length,r.slowestCalls=[],r.average=void 0,0<r.allResourcesCalc.length&&(r.slowestCalls=r.allResourcesCalc.filter(function(e){return e.name!==location.href}).sort(function(e,t){return t.duration-e.duration}),r.average=Math.floor(r.slowestCalls.reduceRight(function(e,t){return"number"!=typeof e?e.duration+t.duration:e+t.duration})/r.slowestCalls.length))}();var l=r;a.default=l},{"./helpers/helpers":7}],6:[function(e,t,a){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;function l(e){return document.createTextNode(e)}function i(e,t,a){t=t||{};var n=document.createElement(e);for(var o in t)"text"!=o&&(n[o]=t[o]);return t.text?n.textContent=t.text:t.childElement&&("object"===r(t.childElement)?t.childElement instanceof NodeList?Array.prototype.slice.call(t.childElement,0).forEach(function(e){n.appendChild(e)}):n.appendChild(t.childElement):n.appendChild(l(t.childElement))),t.class&&(n.className=t.class),n.style.cssText=a||"",n}var n={newTextNode:l,newTag:i,tableFactory:function(e,t,a){var n=i("div",{id:e||"",class:"table-holder"}),o=i("table"),r=i("thead");return r.appendChild(t(i("tr"))),o.appendChild(r),o.appendChild(a(i("tbody"))),n.appendChild(o),n},combineNodes:function(e,t){var a=document.createElement("div");return"object"===r(e)?a.appendChild(e):"string"==typeof e&&a.appendChild(l(e)),"object"===r(t)?a.appendChild(t):"string"==typeof t&&a.appendChild(l(t)),a.childNodes},addClass:function(e,t){return e.classList?e.classList.add(t):e.setAttribute("class",e.getAttribute("class")+" "+t),e},removeClass:function(e,t){return e.classList?e.classList.remove(t):e.setAttribute("class",e.getAttribute("class").replace(new RegExp("(\\s|^)"+t+"(\\s|$)","g"),"$2")),e}};a.default=n},{}],7:[function(e,t,a){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l={getFileType:function(e,t){if(e)switch(e){case"jpg":case"jpeg":case"png":case"gif":case"webp":case"svg":case"ico":return"image";case"js":return"js";case"css":return"css";case"html":return"html";case"woff":case"woff2":case"ttf":case"eot":case"otf":return"font";case"swf":return"flash";case"map":return"source-map"}if(t)switch(t){case"xmlhttprequest":return"ajax";case"img":return"image";case"script":return"js";case"internal":case"iframe":return"html";default:return"other"}return t},getRandomColor:function(e,t,a){for(var n=[e||"0123456789ABCDEF",t||"0123456789ABCDEF",a||"0123456789ABCDEF"],o="#",r=0,l=0;l<6;l++)o+=n[r=Math.floor(l/2)].split("")[Math.floor(Math.random()*n[r].length)];return o},endsWith:function(e,t){return-1!==e.indexOf(t,e.length-t.length)}};l.getInitiatorOrFileTypeColour=function(e,t,a){var n=t||"#bebebe";switch(e){case"css":n="#afd899";break;case"iframe":case"html":n="#85b3f2";break;case"img":case"image":n="#bc9dd6";break;case"script":case"js":n="#e7bd8c";break;case"link":n="#89afe6";break;case"swf":n="#4db3ba";break;case"font":n="#e96859";break;case"xmlhttprequest":case"ajax":n="#e7d98c"}return!0===a?function(e,t){return"#"+(parseInt(e.substr(1,2),16)+t).toString(16)+(parseInt(e.substr(3,2),16)+t).toString(16)+(parseInt(e.substr(5,2),16)+t).toString(16)}(n,-5):n},l.getItemCount=function(e,t){var a,n={},o=[];for(var r in e.forEach(function(e){n[e]=n[e]?n[e]+1:1}),n)(a={})[t||"key"]=r,a.count=n[r],o.push(a);return o.sort(function(e,t){return e.count<t.count?1:-1})},l.clone=function(e){var t;if(null==e||"object"!=r(e))return e;if(e instanceof Date)return(t=new Date).setTime(e.getTime()),t;if(e instanceof Array){t=[];for(var a=0,n=e.length;a<n;a++)t[a]=l.clone(e[a]);return t}if(e instanceof Object){for(var o in t={},e)e.hasOwnProperty(o)&&(t[o]=l.clone(e[o]));return t}throw new Error("Unable to helper.clone obj")};var n=l;a.default=n},{}],8:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n,o,r,l,i,d=(n=e("../helpers/dom"))&&n.__esModule?n:{default:n},s=e("../helpers/style");function c(){if(r)for(l=i.getElementById("perfbook-content");l.firstChild;)l.removeChild(l.firstChild);else{r=d.default.newTag("div",{id:"perfbook-holder"}),l=d.default.newTag("div",{id:"perfbook-content"}),window.outputContent;var e=d.default.newTag("button",{class:"perfbook-close",text:"close"});e.addEventListener("click",function(){o.parentNode.removeChild(o)}),r.appendChild(e),r.appendChild(l)}}function u(e){e&&l.appendChild(e)}var f={setup:function(e){o=document.getElementById("perfbook-iframe");function t(){c(),e(u),i.body.appendChild(r),"hidden"!=getComputedStyle(document.body).overflow?o.style.height=r.clientHeight+36+"px":o.style.height="100%"}o?(i=o.contentWindow.document,r=i.getElementById("perfbook-holder"),c(),e(u),t()):(o=d.default.newTag("iframe",{id:"perfbook-iframe",onload:function(){i=o.contentWindow.document;var e=d.default.newTag("style",{type:"text/css",text:s.style});i.head.appendChild(e),t()}},"position:absolute; top:1%; right:1%; margin-bottom:1em; left:1%; z-index:6543210; width:98%; border:0; box-shadow:0 0 25px 0 rgba(0,0,0,0.5); background:#fff;"),document.body.appendChild(o))},getOutputIFrame:function(){return i}};a.default=f},{"../helpers/dom":6,"../helpers/style":10}],9:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n,o=(n=e("../data"))&&n.__esModule?n:{default:n};function r(){return JSON.parse(localStorage.getItem(l))||[]}var l="performance-bookmarklet-metrics",i={};i.persistanceEnabled=function(){return!!JSON.parse(localStorage.getItem(l))},i.activatePersistance=function(){i.saveLatestMetrics()},i.deactivatePersistance=function(){i.dump()},i.saveLatestMetrics=function(){var e=r();e.push({timestamp:new Date(o.default.perfTiming.navigationStart).toISOString(),url:window.location.href,requests:o.default.requestsOnly.length,domains:o.default.requestsByDomain.length,subDomainsOfTld:o.default.hostSubdomains,requestsToHost:o.default.hostRequests,tldAndSubdomainRequests:o.default.currAndSubdomainRequests,total:o.default.perfTiming.loadEventEnd-o.default.perfTiming.navigationStart,timeToFirstByte:o.default.perfTiming.responseStart-o.default.perfTiming.navigationStart,domContentLoading:o.default.perfTiming.domContentLoadedEventStart-o.default.perfTiming.domLoading,domProcessing:o.default.perfTiming.domComplete-o.default.perfTiming.domLoading}),localStorage.setItem(l,JSON.stringify(e))},i.dump=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=r();0!==t.length?(!0===e&&(localStorage.removeItem(l),console.log("Storage for %s has been cleared",l)),window.PerformanceBookmarklet={persistedData:t},console.table?(console.log("Data also accessible via %cwindow.PerformanceBookmarklet.persistedData%c:\n\n%o","font-family:monospace","font-family:inherit",window.PerformanceBookmarklet),console.table(t)):(console.log("Data also accessible via window.PerformanceBookmarklet.persistedData"),console.dir(window.PerformanceBookmarklet.persistedData))):console.log("There are no page metrics. Please tick the 'Persist Data' checkbox.")};var d=i;a.default=d},{"../data":5}],10:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.style=void 0;a.style="body {overflow: auto; background: #fff; font:normal 12px/18px sans-serif; color:#333;} * {box-sizing:border-box;} svg {font:normal 12px/18px sans-serif;} th {text-align: left;} button {cursor:pointer;} button:disabled {cursor:default;} #perfbook-holder {overflow: hidden; width:100%; padding:1em 2em;} #perfbook-content {position:relative;} .perfbook-close {position:absolute; top:0; right:0; padding:1em; z-index:1; background:transparent; border:0; cursor:pointer;} .full-width {width:100%;} .chart-holder {margin: 5em 0;} h1 {font:bold 18px/18px sans-serif; margin:1em 0; color:#666;} .text-right {text-align: right;} .text-left {text-align: left;} .css {background: #afd899;} .iframe, .html, .internal {background: #85b3f2;} .img, .image {background: #bc9dd6;} .script, .js {background: #e7bd8c;} .link {background: #89afe6;} .swf, .flash {background: #4db3ba;} .font {background: #e96859;} .xmlhttprequest, .ajax {background: #e7d98c;} .other {background: #bebebe;} .css-light {background: #b9cfa0;} .iframe-light, .html-light, .internal-light {background: #c2d9f9;} .img-light, .image-light {background: #deceeb;} .script-light, .js-light {background: #f3dec6;} .link-light {background: #c4d7f3;} .swf-light, .flash-light {background: #a6d9dd;} .font-light {background: #f4b4ac;} .xmlhttprequest-light, .ajax-light {background: #f3ecc6;} .other-light {background: #dfdfdf;} .block-css {fill: #afd899;} .block-iframe, .block-html, .block-internal {fill: #85b3f2;} .block-img, .block-image {fill: #bc9dd6;} .block-script, .block-js {fill: #e7bd8c;} .block-link {fill: #89afe6;} .block-swf, .block-flash {fill: #4db3ba;} .block-font {fill: #e96859;} .block-xmlhttprequest, .block-ajax {fill: #e7d98c;} .block-other {fill: #bebebe;} .block-total {fill: #ccc;} .block-unload {fill: #909;} .block-redirect {fill: #ffff60;} .block-appcache {fill: #1f831f;} .block-dns {fill: #1f7c83;} .block-tcp {fill: #e58226;} .block-ttfb {fill: #1fe11f;} .block-response {fill: #1977dd;} .block-dom {fill: #9cc;} .block-dom-content-loaded {fill: #d888df;} .block-onload {fill: #c0c0ff;} .block-ssl {fill: #c141cd; } .block-ms-first-paint-event {fill: #8fbc83; } .block-dom-interactive-event {fill: #d888df; } .block-network-server {fill: #8cd18c; } .block-custom-measure {fill: #f00; } .block-navigation-api-total {fill: #ccc;} .block-blocking {fill: #cdcdcd;} .block-undefined {fill: #0f0;} .tiles-holder {margin: 2em -18px 2em 0; display: -webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex; -webkit-flex-flow: row wrap; flex-flow: row wrap; } .summary-tile { flex-grow: 1; width:250px; background:#ddd; padding: 1em; margin:0 18px 1em 0; color:#666; text-align:center;} .summary-tile dt {font-weight:bold; font-size:16px; display:block; line-height:1.2em; min-height:2.9em; padding:0 0 0.5em;} .summary-tile dd {font-weight:bold; line-height:60px; margin:0;} .summary-tile-appendix {float:left; clear:both; width:100%; font-size:10px; line-height:1.1em; color:#666;} .summary-tile-appendix dt {float:left; clear:both;} .summary-tile-appendix dd {float:left; margin:0 0 0 1em;} .pie-charts-holder {margin-right: -72px; display: -webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex; -webkit-flex-flow: row wrap; flex-flow: row wrap;} .pie-chart-holder {flex-grow: 1; width:350px; max-width: 600px; margin: 0 72px 0 0;} .pie-chart-holder h1 {min-height:2em;} .pie-chart {width:100%;} .table-holder {overflow-x:auto} .table-holder table {float:left; width:100%; font-size:12px; line-height:18px;} .table-holder th, .table-holder td {line-height: 1em; margin:0; padding:0.25em 0.5em 0.25em 0;} #pie-request-by-domain {flex-grow: 2; width:772px; max-width: 1272px;} #filetypes-and-intiators-table {margin: 2em 0 5em;} #filetypes-and-intiators-table table {vertical-align: middle; border-collapse: collapse;} #filetypes-and-intiators-table td {padding:0.5em; border-right: solid 1px #fff;} #filetypes-and-intiators-table td:last-child {padding-right: 0; border-right:0;} #filetypes-and-intiators-table .file-type-row td {border-top: solid 10px #fff;} #filetypes-and-intiators-table .file-type-row:first-child td {border-top: none;} .water-fall-holder {fill:#ccc;} .water-fall-chart {width:100%; background:#f0f5f0;} .water-fall-chart .marker-holder {width:100%;} .water-fall-chart .line-holder {stroke-width:1; stroke: #ccc; stroke-opacity:0.5;} .water-fall-chart .line-holder.active {stroke: #69009e; stroke-width:2; stroke-opacity:1;} .water-fall-chart .labels {width:100%;} .water-fall-chart .labels .inner-label {pointer-events: none;} .water-fall-chart .time-block.active {opacity: 0.8;} .water-fall-chart .line-end, .water-fall-chart .line-start {display: none; stroke-width:1; stroke-opacity:0.5; stroke: #000;} .water-fall-chart .line-end.active, .water-fall-chart .line-start.active {display: block;} .water-fall-chart .mark-holder text {-webkit-writing-mode: tb; writing-mode:vertical-lr; writing-mode: tb;} .time-scale line {stroke:#0cc; stroke-width:1;} .time-scale text {font-weight:bold;} .domain-selector, .start-time-selector, .end-time-selector, .exclude-pattern-editor, .include-pattern-editor, .mark-from-selector { float:right; } .exclude-pattern-editor, .include-pattern-editor { width: 150px; word-break: break-all; } .navigation-timing {} .legends-group { display: -webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex; -webkit-flex-flow: row wrap; flex-flow: row wrap; } .legends-group .legend-holder { flex-grow: 1; width:250px; padding:0 1em 1em; } .legends-group .legend-holder h4 { margin: 0; padding: 0; } .legend dt {float: left; clear: left; padding: 0 0 0.5em;} .legend dd {float: left; display: inline-block; margin: 0 1em; line-height: 1em;} .legend .colorBoxHolder span {display: inline-block; width: 15px; height: 1em;} .page-metric {} .page-metric button {margin-left: 2em;}"},{}],11:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n,o=(n=e("../helpers/iFrameHolder"))&&n.__esModule?n:{default:n};function r(e,t,a){var n=document.createElementNS("http://www.w3.org/2000/svg",e);for(var o in t=t||{})"text"!=o&&n.setAttributeNS(null,o,t[o]);return n.textContent=t.text||"",n.style.cssText=a||"",n}var l={newEl:r,newTextEl:function(e,t,a){return r("text",{fill:"#111",y:t,text:e},(a||"")+" text-shadow:0 0 4px #fff;")},getNodeTextWidth:function(e){var t=r("svg:svg",{},"visibility:hidden;");t.appendChild(e),o.default.getOutputIFrame().body.appendChild(t);var a=e.getBBox().width;return t.parentNode.removeChild(t),a}};a.default=l},{"../helpers/iFrameHolder":8}],12:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n={logTable:function(e){0<e.data.length&&console.table&&(console.log("\n\n\n"+e.name+":"),console.table(e.data,e.columns))},logTables:function(e){e.forEach(n.logTable)}},o=n;a.default=o},{}],13:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var w=n(e("../helpers/svg")),y=n(e("../helpers/dom"));function n(e){return e&&e.__esModule?e:{default:e}}var o={timeBlock:function(e,t,a,n,o,r){return{name:e,start:t,end:a,total:"number"!=typeof t||"number"!=typeof a?void 0:a-t,cssClass:n,segments:o,rawResource:r}}};o.setupTimeLine=function(l,i,e,d,t,a){function c(e){var t=e.target;y.default.addClass(t,"active");var a=t.x.baseVal.valueInSpecifiedUnits+t.width.baseVal.valueInSpecifiedUnits+"%",n=t.x.baseVal.valueInSpecifiedUnits+"%";v.x1.baseVal.valueAsString=a,v.x2.baseVal.valueAsString=a,k.x1.baseVal.valueAsString=n,k.x2.baseVal.valueAsString=n,y.default.addClass(v,"active"),y.default.addClass(k,"active"),t.parentNode.appendChild(v),t.parentNode.appendChild(k)}function u(e){y.default.removeClass(e.target,"active"),y.default.removeClass(v,"active"),y.default.removeClass(k,"active")}var s,f=1e3*l,p=i/100,n=e.filter(function(e){return"number"==typeof e.start&&"number"==typeof e.total}).sort(function(e,t){return(e.start||0)-(t.start||0)}),o=0<d.length?d.reduce(function(e,t){return Math.max("number"==typeof e?e:0,w.default.getNodeTextWidth(w.default.newTextEl(t.name,"0")))}):0,m=25*(n.length+1),r=m+o+100,h=y.default.newTag("section",{class:"resource-timing water-fall-holder chart-holder"}),g=w.default.newEl("svg:svg",{height:Math.floor(r),class:"water-fall-chart"}),b=w.default.newEl("g",{class:"labels"}),v=w.default.newEl("line",{x1:"0",y1:"0",x2:"0",y2:m,class:"line-end"}),k=w.default.newEl("line",{x1:"0",y1:"0",x2:"0",y2:m,class:"line-start"});return g.appendChild(function(){for(var e=w.default.newEl("g",{class:"time-scale full-width"}),t=0,a=i/1e3,n=100/a;t<=a;t++){var o=w.default.newTextEl(t+l+"sec",m);a-.2<t?(o.setAttribute("x",n*t-.5+"%"),o.setAttribute("text-anchor","end")):o.setAttribute("x",n*t+.5+"%");var r=w.default.newEl("line",{x1:n*t+"%",y1:"0",x2:n*t+"%",y2:m});e.appendChild(r),e.appendChild(o)}return e}()),g.appendChild((s=w.default.newEl("g",{transform:"scale(1, 1)",class:"marker-holder"}),d.forEach(function(e,t){var a=(e.startTime-f)/p,n=w.default.newEl("g",{class:"mark-holder"}),o=w.default.newEl("g",{class:"line-holder"}),r=w.default.newEl("g",{class:"line-label-holder",x:a+"%"});e.x=a;var l=w.default.newTextEl(e.name+" ::::: ("+Math.round(e.startTime)+"ms)",25+m);l.setAttribute("x",a+"%"),l.setAttribute("stroke",""),o.appendChild(w.default.newEl("line",{x1:a+"%",y1:0,x2:a+"%",y2:m})),d[t-1]&&e.x-d[t-1].x<1&&(l.setAttribute("x",d[t-1].x+1+"%"),e.x=d[t-1].x+1),o.appendChild(w.default.newEl("line",{x1:a+"%",y1:m,x2:e.x+"%",y2:23+m}));var i=!1;l.addEventListener("mouseenter",function(e){i||(i=!0,y.default.addClass(o,"active"),n.parentNode.appendChild(n))}),l.addEventListener("mouseleave",function(e){i=!1,y.default.removeClass(o,"active")}),r.appendChild(l),n.appendChild(w.default.newEl("title",{text:e.name+" ("+Math.round(e.startTime)+"ms)"})),n.appendChild(o),s.appendChild(n),n.appendChild(r)}),s)),t.forEach(function(e,t){g.appendChild(function(e){var t=w.default.newEl("rect",{width:(e.total||1)/p+"%",height:m,x:(e.start||.001)/p+"%",y:0,class:e.cssClass||"block-undefined"});return t.appendChild(w.default.newEl("title",{text:e.name})),t}(e))}),n.forEach(function(e,t){var a=e.total||1,n=25*t;g.appendChild(function t(e,a,n,o,r,l,i){var d,s=w.default.newEl("rect",{width:e/p+"%",height:a-1,x:Math.round(n/p*100)/100+"%",y:o,class:(i&&0<i.length?"time-block":"segment")+" "+(r||"block-undefined")});return l&&s.appendChild(w.default.newEl("title",{text:l})),s.addEventListener("mouseenter",c),s.addEventListener("mouseleave",u),i&&0<i.length?((d=w.default.newEl("g")).appendChild(s),i.forEach(function(e){0<e.total&&"number"==typeof e.start&&d.appendChild(t(e.total,8,e.start?e.start-f:.001,o,e.cssClass,e.name+" ("+Math.round(e.start)+"ms - "+Math.round(e.end)+"ms | total: "+Math.round(e.total)+"ms)"))}),d):s}(a,25,e.start?e.start-f:.001,n,e.cssClass,e.name+" ("+e.start+"ms - "+e.end+"ms | total: "+e.total+"ms)",e.segments));var o=w.default.newTextEl(e.name+" ("+Math.round(e.total)+"ms)",n+(e.segments?20:17)),r=(e.start?e.start-f:.001)/p;10<(e.total||1)/p&&w.default.getNodeTextWidth(o)<200?(o.setAttribute("class","inner-label"),o.setAttribute("x",.5+r+"%"),o.setAttribute("width",a/p+"%")):r+a/p<80?o.setAttribute("x",r+a/p+.5+"%"):(o.setAttribute("x",r-.5+"%"),o.setAttribute("text-anchor","end")),o.style.opacity=e.name.match(/js.map$/)?"0.5":"1",b.appendChild(o)}),g.appendChild(b),a&&h.appendChild(y.default.newTag("h1",{text:a})),h.appendChild(g),h};var r=o;a.default=r},{"../helpers/dom":6,"../helpers/svg":11}],14:[function(e,t,a){"use strict";var n=d(e("./data")),o=d(e("./helpers/iFrameHolder")),r=d(e("./components/navigationTimeline")),l=d(e("./components/resourcesTimeline")),i=d(e("./components/legend"));function d(e){return e&&e.__esModule?e:{default:e}}!function(){if("about:"!==location.protocol&&n.default.isValid()){o.default.setup(function(t){[i.default.init(),(new l.default).init(),r.default.init()].forEach(function(e){t(e)})})}}()},{"./components/legend":1,"./components/navigationTimeline":2,"./components/resourcesTimeline":4,"./data":5,"./helpers/iFrameHolder":8}],15:[function(e,t,a){"use strict";n(e("./data")),n(e("./helpers/tableLogger"));function n(e){return e&&e.__esModule?e:{default:e}}},{"./data":5,"./helpers/tableLogger":12}]},{},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]);